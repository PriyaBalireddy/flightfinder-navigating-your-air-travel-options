{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\priya\\\\OneDrive\\\\Desktop\\\\flightfinder navigating your air travel options\\\\project\\\\client\\\\src\\\\context\\\\GeneralContext.jsx\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState, useEffect } from 'react';\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const GeneralContext = /*#__PURE__*/createContext();\nconst GeneralContextProvider = ({\n  children\n}) => {\n  _s();\n  const [username, setUsername] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [usertype, setUsertype] = useState('');\n  const [ticketBookingDate, setTicketBookingDate] = useState();\n  const [currentUser, setCurrentUser] = useState(null); // ✅ key to trigger UI updates\n\n  const navigate = useNavigate();\n\n  // Load user from localStorage on first load\n  useEffect(() => {\n    const storedUser = {\n      userId: localStorage.getItem('userId'),\n      username: localStorage.getItem('username'),\n      email: localStorage.getItem('email'),\n      usertype: localStorage.getItem('userType')\n    };\n    if (storedUser.userId) {\n      setCurrentUser(storedUser);\n    }\n  }, []);\n  const login = async () => {\n    try {\n      const loginInputs = {\n        email,\n        password\n      };\n      await axios.post('http://localhost:6001/login', loginInputs).then(res => {\n        localStorage.setItem('userId', res.data._id);\n        localStorage.setItem('userType', res.data.usertype);\n        localStorage.setItem('username', res.data.username);\n        localStorage.setItem('email', res.data.email);\n        const newUser = {\n          userId: res.data._id,\n          username: res.data.username,\n          email: res.data.email,\n          usertype: res.data.usertype\n        };\n        setCurrentUser(newUser); // ✅ trigger update\n\n        if (res.data.usertype === 'customer') {\n          navigate('/');\n        } else if (res.data.usertype === 'admin') {\n          navigate('/admin');\n        } else if (res.data.usertype === 'flight-operator') {\n          navigate('/flight-admin');\n        }\n      }).catch(err => {\n        alert(\"Login failed!\");\n        console.log(err);\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  const register = async () => {\n    try {\n      const inputs = {\n        username,\n        email,\n        usertype,\n        password\n      };\n      await axios.post('http://localhost:6001/register', inputs).then(res => {\n        localStorage.setItem('userId', res.data._id);\n        localStorage.setItem('userType', res.data.usertype);\n        localStorage.setItem('username', res.data.username);\n        localStorage.setItem('email', res.data.email);\n        const newUser = {\n          userId: res.data._id,\n          username: res.data.username,\n          email: res.data.email,\n          usertype: res.data.usertype\n        };\n        setCurrentUser(newUser); // ✅ update context\n\n        if (res.data.usertype === 'customer') {\n          navigate('/');\n        } else if (res.data.usertype === 'admin') {\n          navigate('/admin');\n        } else if (res.data.usertype === 'flight-operator') {\n          navigate('/flight-admin');\n        }\n      }).catch(err => {\n        alert(\"Registration failed!\");\n        console.log(err);\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  const logout = () => {\n    localStorage.clear();\n    setCurrentUser(null); // ✅ clear context user\n    navigate('/');\n  };\n  return /*#__PURE__*/_jsxDEV(GeneralContext.Provider, {\n    value: {\n      username,\n      setUsername,\n      email,\n      setEmail,\n      password,\n      setPassword,\n      usertype,\n      setUsertype,\n      ticketBookingDate,\n      setTicketBookingDate,\n      login,\n      register,\n      logout,\n      currentUser // ✅ expose current user\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 5\n  }, this);\n};\n_s(GeneralContextProvider, \"2lL+VxoVphDJVrugAYST6jA/36o=\", false, function () {\n  return [useNavigate];\n});\n_c = GeneralContextProvider;\nexport default GeneralContextProvider;\nvar _c;\n$RefreshReg$(_c, \"GeneralContextProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","axios","useNavigate","jsxDEV","_jsxDEV","GeneralContext","GeneralContextProvider","children","_s","username","setUsername","email","setEmail","password","setPassword","usertype","setUsertype","ticketBookingDate","setTicketBookingDate","currentUser","setCurrentUser","navigate","storedUser","userId","localStorage","getItem","login","loginInputs","post","then","res","setItem","data","_id","newUser","catch","err","alert","console","log","register","inputs","logout","clear","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/priya/OneDrive/Desktop/flightfinder navigating your air travel options/project/client/src/context/GeneralContext.jsx"],"sourcesContent":["import React, { createContext, useState, useEffect } from 'react';\r\nimport axios from \"axios\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport const GeneralContext = createContext();\r\n\r\nconst GeneralContextProvider = ({ children }) => {\r\n  const [username, setUsername] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [usertype, setUsertype] = useState('');\r\n  const [ticketBookingDate, setTicketBookingDate] = useState();\r\n\r\n  const [currentUser, setCurrentUser] = useState(null); // ✅ key to trigger UI updates\r\n\r\n  const navigate = useNavigate();\r\n\r\n  // Load user from localStorage on first load\r\n  useEffect(() => {\r\n    const storedUser = {\r\n      userId: localStorage.getItem('userId'),\r\n      username: localStorage.getItem('username'),\r\n      email: localStorage.getItem('email'),\r\n      usertype: localStorage.getItem('userType'),\r\n    };\r\n\r\n    if (storedUser.userId) {\r\n      setCurrentUser(storedUser);\r\n    }\r\n  }, []);\r\n\r\n  const login = async () => {\r\n    try {\r\n      const loginInputs = { email, password };\r\n      await axios.post('http://localhost:6001/login', loginInputs)\r\n        .then((res) => {\r\n          localStorage.setItem('userId', res.data._id);\r\n          localStorage.setItem('userType', res.data.usertype);\r\n          localStorage.setItem('username', res.data.username);\r\n          localStorage.setItem('email', res.data.email);\r\n\r\n          const newUser = {\r\n            userId: res.data._id,\r\n            username: res.data.username,\r\n            email: res.data.email,\r\n            usertype: res.data.usertype,\r\n          };\r\n\r\n          setCurrentUser(newUser); // ✅ trigger update\r\n\r\n          if (res.data.usertype === 'customer') {\r\n            navigate('/');\r\n          } else if (res.data.usertype === 'admin') {\r\n            navigate('/admin');\r\n          } else if (res.data.usertype === 'flight-operator') {\r\n            navigate('/flight-admin');\r\n          }\r\n        }).catch((err) => {\r\n          alert(\"Login failed!\");\r\n          console.log(err);\r\n        });\r\n\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  const register = async () => {\r\n    try {\r\n      const inputs = { username, email, usertype, password };\r\n      await axios.post('http://localhost:6001/register', inputs)\r\n        .then((res) => {\r\n          localStorage.setItem('userId', res.data._id);\r\n          localStorage.setItem('userType', res.data.usertype);\r\n          localStorage.setItem('username', res.data.username);\r\n          localStorage.setItem('email', res.data.email);\r\n\r\n          const newUser = {\r\n            userId: res.data._id,\r\n            username: res.data.username,\r\n            email: res.data.email,\r\n            usertype: res.data.usertype,\r\n          };\r\n\r\n          setCurrentUser(newUser); // ✅ update context\r\n\r\n          if (res.data.usertype === 'customer') {\r\n            navigate('/');\r\n          } else if (res.data.usertype === 'admin') {\r\n            navigate('/admin');\r\n          } else if (res.data.usertype === 'flight-operator') {\r\n            navigate('/flight-admin');\r\n          }\r\n        }).catch((err) => {\r\n          alert(\"Registration failed!\");\r\n          console.log(err);\r\n        });\r\n\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  const logout = () => {\r\n    localStorage.clear();\r\n    setCurrentUser(null); // ✅ clear context user\r\n    navigate('/');\r\n  };\r\n\r\n  return (\r\n    <GeneralContext.Provider value={{\r\n      username, setUsername,\r\n      email, setEmail,\r\n      password, setPassword,\r\n      usertype, setUsertype,\r\n      ticketBookingDate, setTicketBookingDate,\r\n      login, register, logout,\r\n      currentUser, // ✅ expose current user\r\n    }}>\r\n      {children}\r\n    </GeneralContext.Provider>\r\n  );\r\n};\r\n\r\nexport default GeneralContextProvider;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}